import{S as O,i as F,s as N,e as f,t as $,a as v,b as d,c as b,d as u,f as P,n as p,g as k,h as z,r as Q,o as R,j as U,l as V,k as X,m as Y,p as Z,q as tt,u as et,v as nt,w as at,x as st,y as rt,z as ot,A as C,B as S,C as j,D as M,E as A,F as it}from"./vendor.44f51b07.js";const lt=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const e of n)if(e.type==="childList")for(const i of e.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function s(n){const e={};return n.integrity&&(e.integrity=n.integrity),n.referrerpolicy&&(e.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?e.credentials="include":n.crossorigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function a(n){if(n.ep)return;n.ep=!0;const e=s(n);fetch(n.href,e)}};lt();var ct="/west-madison/assets/madison-house.2ccfa63b.png";function ut(o){let t,s,a,n,e,i,r,c,m,h,q,w;return{c(){t=f("div"),s=f("h2"),a=$(o[1]),n=v(),e=f("p"),i=$("avg: "),r=$(o[3]),c=v(),m=f("span"),h=$(o[0]),q=v(),w=f("div"),d(s,"class","svelte-1kyti69"),d(m,"class","units svelte-1kyti69"),d(e,"class","svelte-1kyti69"),d(w,"class","line-chart svelte-1kyti69"),d(t,"class","container svelte-1kyti69")},m(g,x){b(g,t,x),u(t,s),u(s,a),u(t,n),u(t,e),u(e,i),u(e,r),u(e,c),u(e,m),u(m,h),u(t,q),u(t,w),o[5](w)},p(g,[x]){x&2&&P(a,g[1]),x&1&&P(h,g[0])},i:p,o:p,d(g){g&&k(t),o[5](null)}}}function mt(o,t){const s=Math.pow(10,t);return Math.round(o*s)/s}const ft=20,T=30,W=30,B=40;function dt(o,t,s){let a,{unit:n}=t,{data:e}=t,{name:i}=t;const r=e.map(l=>l[i]),c=e.map(l=>l.time),m=mt(r.reduce((l,y)=>l+y/r.length,0),1),h=nt,q=r.length,w=z(c),g=z(r),x=Q(q);R(()=>{const l=a.offsetWidth,y=a.offsetHeight,H=U(w,[B,l-T]).nice(),I=V(g,[y-W,ft]),K=X(H).ticks(8).tickSizeOuter(0),G=Y(I).ticks(y/40),J=Z().curve(h).x(_=>H(c[_])).y(_=>I(r[_])),L=tt("svg").attr("width",l).attr("height",y).attr("viewBox",[0,0,l,y]).attr("style","max-width: 100%; height: auto; height: intrinsic;");L.append("g").attr("transform",`translate(0,${y-W})`).call(K),L.append("g").attr("transform",`translate(${B},0)`).call(G).call(_=>_.select(".domain").remove()).call(_=>_.selectAll(".tick line").clone().attr("x2",l-B-T).attr("stroke-opacity",.1)).call(_=>_.append("text").attr("x",-B).attr("y",10).attr("fill","currentColor").attr("text-anchor","start").text(n)),L.append("path").attr("fill","none").attr("stroke","currentColor").attr("stroke-width",1.5).attr("stroke-opacity",.65).attr("d",J(x)),a.append(L.node())});function D(l){et[l?"unshift":"push"](()=>{a=l,s(2,a)})}return o.$$set=l=>{"unit"in l&&s(0,n=l.unit),"data"in l&&s(4,e=l.data),"name"in l&&s(1,i=l.name)},[n,i,a,m,e,D]}class E extends O{constructor(t){super();F(this,t,dt,ut,N,{unit:0,data:4,name:1})}}function pt(o){let t,s,a=o[3].message+"",n;return{c(){t=f("p"),s=$("Something went wrong: "),n=$(a)},m(e,i){b(e,t,i),u(t,s),u(t,n)},p,i:p,o:p,d(e){e&&k(t)}}}function _t(o){let t,s,a,n,e,i;return t=new E({props:{data:o[2],name:"co2",unit:"ppm"}}),a=new E({props:{data:o[2],name:"temp",unit:"degrees"}}),e=new E({props:{data:o[2],name:"humidity",unit:"%"}}),{c(){j(t.$$.fragment),s=v(),j(a.$$.fragment),n=v(),j(e.$$.fragment)},m(r,c){M(t,r,c),b(r,s,c),M(a,r,c),b(r,n,c),M(e,r,c),i=!0},p,i(r){i||(C(t.$$.fragment,r),C(a.$$.fragment,r),C(e.$$.fragment,r),i=!0)},o(r){S(t.$$.fragment,r),S(a.$$.fragment,r),S(e.$$.fragment,r),i=!1},d(r){A(t,r),r&&k(s),A(a,r),r&&k(n),A(e,r)}}}function gt(o){let t;return{c(){t=f("p"),t.textContent="Fetching data from office raspberry pi..."},m(s,a){b(s,t,a)},p,i:p,o:p,d(s){s&&k(t)}}}function ht(o){let t,s,a={ctx:o,current:null,token:null,hasCatch:!0,pending:gt,then:_t,catch:pt,value:2,error:3,blocks:[,,,]};return st(o[0],a),{c(){t=rt(),a.block.c()},m(n,e){b(n,t,e),a.block.m(n,a.anchor=e),a.mount=()=>t.parentNode,a.anchor=t,s=!0},p(n,[e]){o=n,ot(a,o,e)},i(n){s||(C(a.block),s=!0)},o(n){for(let e=0;e<3;e+=1){const i=a.blocks[e];S(i)}s=!1},d(n){n&&k(t),a.block.d(n),a.token=null,a=null}}}function yt(o){return o*(9/5)+32}const vt=at("%m/%d/%y %H:%M:%S"),bt=1e3;function kt(o){return[(async()=>(await(await fetch(`http://67.205.131.141/data?nlines=${bt}`)).json()).readings.map(e=>{const i=vt(e.time);if(i===null)return null;const r=yt(e.temp),c=e.humidity,m=e.co2;return{time:i,temp:r,humidity:c,co2:m}}).filter(e=>e!==null))()]}class wt extends O{constructor(t){super();F(this,t,kt,ht,N,{})}}function xt(o){let t,s,a,n,e,i,r,c;return r=new wt({}),{c(){t=f("main"),s=f("img"),n=v(),e=f("h1"),e.textContent="West Madison HomeBase",i=v(),j(r.$$.fragment),it(s.src,a=ct)||d(s,"src",a),d(s,"alt","Svelte Logo"),d(s,"class","svelte-14jw2mw"),d(e,"class","svelte-14jw2mw"),d(t,"class","svelte-14jw2mw")},m(m,h){b(m,t,h),u(t,s),u(t,n),u(t,e),u(t,i),M(r,t,null),c=!0},p,i(m){c||(C(r.$$.fragment,m),c=!0)},o(m){S(r.$$.fragment,m),c=!1},d(m){m&&k(t),A(r)}}}class $t extends O{constructor(t){super();F(this,t,null,xt,N,{})}}new $t({target:document.getElementById("app")});
